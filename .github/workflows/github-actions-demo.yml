name: Build
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    container:
      image: gentoo/stage3:systemd
    steps:
      - uses: actions/checkout@v2
      - name: List files in the repository
        run: |
          echo "-- /"
          ls /
          echo "-- /github"
          ls /github
          echo "-- /workflow"
          ls /github/workflow
          echo "-- ${{ github.workspace }}"
          ls ${{ github.workspace }}
      - run: echo "🍏 This job's status is ${{ github.workspace }}."
      - name: Sync portage repository
        run: emerge --sync
      - name: Add overlay
        run: |
          echo ACCEPT_KEYWORDS=\"~amd64\" >> /etc/portage/make.conf
          emerge app-eselect/eselect-repository
      - name: List files in the repository
        run: |
          ls /
          ls /github
          ls /github/workspace
          ls ${{ github.workspace }}
      - run: echo "🍏 This job's status is ${{ job.status }}."
  test1:
    runs-on: ubuntu-latest
    container:
      image: gentoo/stage3:systemd
    needs: test
    steps:
      - run: |
          ls /usr
          ls /github
